<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding call back</title>
</head>

<body>
    <script>
        // let foo=data=>console.log('hello foo '+ data)

        // function bar(data, callback){
        //         callback(data)
        // }
        // bar('raj', data=>console.log('hello foo '+ data))
        //SOLID
        // let add=(x,y)=> x+y;
        // let mul=(x,y)=> x*y;
        // let mod=(x, y)=> x%y;

        // //OCP
        // function operation(x, y , callback){
        //     return callback(x,y);
        // }

        // console.log(operation(1, 2 , mod))

        //how js works? 
        // console.log('hello')
        // setTimeout(() => {
        //        console.log('inside settime out')
        // }, 1000);
        // console.log('done')

        //callback hell
        // setTimeout(() => {
        //     console.log("Task 1");
        //     setTimeout(() => {
        //         console.log("Task 2");
        //         setTimeout(() => {
        //             console.log("Task 3");
        //         }, 1000);
        //     }, 1000);
        // }, 1000);


        // let promiseToCleanTheRoom = new Promise(function (resolved, reject) {
        //     //cleanning the room

        //     let isClean = false;
        //     if (isClean) {
        //         resolved('clean');
        //     } else {
        //         reject('not clean');
        //     }

        // });
        // promiseToCleanTheRoom.then(res=>console.log(res)).catch(rej=>console.log(rej) )

        //java 8: CompletableFuture

        // function cleanRoom() {
        //     return Promise.resolve("Cleaned Room");
        // }

        // function removeGarbage(previousTask) {
        //     return Promise.resolve(previousTask + " → Garbage Removed");
        // }

        // function winIceCream(previousTask) {
        //     return Promise.resolve(previousTask + " → Won Ice Cream");
        // }
        // cleanRoom()
        //     .then(removeGarbage)
        //     .then(winIceCream)
        //     .then((result) => console.log("Finished:", result))
        //     .catch((err) => console.error(err));


        // function cleanRoom() {
        //     return Promise.resolve("Cleaned is done");
        // }

        // function removeGarbage(previousTask) {
        //     // simulate error condition
        //     if (!previousTask.includes("Cleaned")) {
        //         //throw new Error("Room is not clean yet!");
        //          return Promise.reject(new Error("Room is not clean yet!"));
        //     }
        //     return Promise.resolve(previousTask + " → Garbage Removed");
        // }

        // function winIceCream(previousTask) {
        //     return Promise.resolve(previousTask + " → Won Ice Cream");
        // }

        // cleanRoom()
        // .then(removeGarbage)
        // .then(winIceCream)
        // .then(res=> console.log(res))
        // .catch(err=> console.log(err))
        // .finally(resp=> console.log(resp))

        // function wait(ms) {
        //     return new Promise((resolve) => setTimeout(resolve, ms));
        // }

        // async function demo() {
        //     console.log("Start");
        //     await wait(2000);
        //     console.log("End after 2 sec");
        // }
        // demo();
        //  console.log("done");

        // const add = (a, b) =>new Promise((resolve) => setTimeout(() => resolve(a + b), 1000));

        // async function calc() {
        //     let result = await add(10, 20);
        //     result = await add(result, 30);
        //     console.log("Final result:", result);
        // }
        // calc();
        // console.log('done')

        function step1() {
            return new Promise((resolve) => setTimeout(() => resolve("Step 1"), 1000));
        }

        function step2(data) {
            return new Promise((resolve) => setTimeout(() => resolve(data + " → Step 2"), 1000));
        }

        function step3(data) {
            return new Promise((resolve) => setTimeout(() => resolve(data + " → Step 3"), 1000));
        }

        // step1()
        //     .then(step2)
        //     .then(step3)
        //     .then(console.log)
        //     .catch(console.error);

        // async function runSteps() {
        //     try {
        //         const res1 = await step1();
        //         const res2 = await step2(res1);
        //         const res3 = await step3(res2);
        //         console.log(res3);
        //     } catch (err) {
        //         console.error("Error occurred:", err);
        //     }
        // }
        // runSteps();

        // let xhr = new XMLHttpRequest();
        // xhr.open("GET", "https://jsonplaceholder.typicode.com/posts/1", true);
        // console.log('after open method')
        // xhr.onload = function () {
        //     if (xhr.status === 200) {
        //         console.log(JSON.parse(xhr.responseText));
        //     }
        // };
        // xhr.send();

        // fetch("https://jsonplaceholder.typicode.com/posts/1")
        //     .then((response) => response.json())
        //     .then((data) => console.log("Post:", data))
        //     .catch((err) => console.error("Error fetching:", err));

        async function getPost() {
            try {
                const response = await fetch("https://jsonplaceholder.typicode.com/posts/1");
                const data = await response.json();
                console.log("Post:", data);
            } catch (e) {
                console.error("Fetch error:", e);
            }
        }
        getPost();
        console.log('i am free from what my helper is doing')
    </script>
</body>

</html>